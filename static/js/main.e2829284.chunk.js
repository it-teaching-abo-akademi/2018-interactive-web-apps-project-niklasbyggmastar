(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),l=a(39),r=a.n(l),s=(a(66),a(3)),c=a(4),i=a(7),u=a(5),m=a(6),f=a(216),p=a(215),h=a(217),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).createPortfolio=function(){a.props.history.push("/new")},a.portfolios=[],a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[];return"undefined"!==typeof Storage&&0!==localStorage.length&&(this.portfolios=JSON.parse(localStorage.getItem("portfolios")),t=this.portfolios),console.log(t),n.a.createElement("div",null,t.length>0&&n.a.createElement("div",null,n.a.createElement("h3",{className:"mb-4"},"My portfolios"),n.a.createElement("div",{className:"mb-5"},t.map(function(e,t){return n.a.createElement(h.a,{to:"/portfolio/"+t,className:"list-item",key:t},n.a.createElement("span",{className:"float-left"},e.name),n.a.createElement("i",{className:"fas fa-chevron-right"}))}))),0===t.length&&n.a.createElement("div",null,n.a.createElement("h4",null,"You don't have any portfolios yet"),n.a.createElement("button",{onClick:function(){return e.createPortfolio()},type:"button",className:"btn btn-success"},"Create one")))}}]),t}(o.Component),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).save=function(e){e.preventDefault();var t=a.refs.name.value;if(t){var o={name:t,stocks:[]};if(a.portfolios.length>=10)return console.log("Too many portfolios!"),void alert("Can not create more than 10 portfolios");a.portfolios.push(o),a.setState({state:a.portfolios}),"undefined"!==typeof Storage?localStorage.setItem("portfolios",JSON.stringify(a.portfolios)):console.log("No support for local storage"),console.log(a.portfolios),a.props.history.push("/")}else alert("Enter a name!")},a.portfolios=[],a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.refs.name.focus()}},{key:"render",value:function(){var e=this;return"undefined"!==typeof Storage&&0!==localStorage.length&&(this.storedPortfolios=JSON.parse(localStorage.getItem("portfolios")),this.portfolios=this.storedPortfolios),n.a.createElement("div",null,n.a.createElement("form",{className:"form-group",ref:"newPortfolioForm"},n.a.createElement("label",{htmlFor:"name"},"Portfolio name"),n.a.createElement("input",{ref:"name",type:"text",className:"form-control"}),n.a.createElement("button",{onClick:function(t){return e.save(t)},className:"btn btn-primary w-100 mt-3"},"Save")))}}]),t}(o.Component),g=a(14),d=a.n(g),k=a(29),E=a(13),S=a(19),y=(a(43),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).confirmRemovePortfolio=function(e){Object(S.confirmAlert)({title:"Confirm to remove",message:"Are you sure to remove this portfolio? All of the stocks inside it will also be removed.",buttons:[{label:"Yes",onClick:function(){return a.removePortfolio(e)}},{label:"No"}]})},a.removePortfolio=function(e){e.preventDefault(),"undefined"!==typeof Storage&&0!==localStorage.length&&(a.portfolios=JSON.parse(localStorage.getItem("portfolios")),a.portfolios.splice(a.id,1),localStorage.setItem("portfolios",JSON.stringify(a.portfolios)),a.props.history.push("/"))},a.showAddStocksDialog=function(e){e.preventDefault(),Object(S.confirmAlert)({customUI:function(e){var t=e.onClose;return n.a.createElement("div",{className:"addStockDiv"},n.a.createElement("h1",null,"Add a stock"),n.a.createElement("form",{onSubmit:function(){a.addStocks(),t()},className:"form-group"},n.a.createElement("label",{htmlFor:"symbol"},"Symbol"),n.a.createElement("input",{value:a.state.symbol,onChange:a.symbolChange,type:"text",className:"form-control"}),n.a.createElement("label",{htmlFor:"numOfShares"},"Number of shares"),n.a.createElement("input",{value:a.state.num,onChange:a.numOfSharesChange,type:"number",className:"form-control mb-3"}),n.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:t},"Cancel"),n.a.createElement("input",{type:"submit",value:"Add",className:"btn btn-success w-50 float-right"})))}})},a.addStocks=function(){var e=a.state.name,t=a.state.numOfShares;if(e.length>0&&t.length>0)if(e.length>=3&&e.length<=4){var o=a.state.portfolio;if(console.log(o.stocks.length),o.stocks.length<=50){o.stocks.push({name:e,numOfShares:t}),a.setState({portfolio:o}),console.log(o);var n=JSON.parse(localStorage.getItem("portfolios"));n[a.id]=o,localStorage.setItem("portfolios",JSON.stringify(n)),a.setState({name:"",numOfShares:0})}else alert("Can not have more than 50 symbols in a portfolio")}else alert("Symbol must be 3 or 4 characters long");else alert("Please fill in all the fields")},a.confirmRemoveStock=function(e,t){Object(S.confirmAlert)({title:"Confirm to remove",message:"Are you sure to remove this stock?",buttons:[{label:"Yes",onClick:function(){return a.removeStock(e,t)}},{label:"No"}]})},a.removeStock=function(e,t){e.preventDefault();var o=a.state.portfolio;a.state.portfolio.stocks.splice(t,1),console.log(a.state.portfolio),a.setState({portfolio:o});var n=JSON.parse(localStorage.getItem("portfolios"));n[a.id]=o,localStorage.setItem("portfolios",JSON.stringify(n))},a.confirmRemovePortfolio=function(e){e.preventDefault(),Object(S.confirmAlert)({title:"Confirm to remove",message:"Are you sure to remove this portfolio? All of the stocks inside it will also be removed.",buttons:[{label:"Yes",onClick:function(){return a.removePortfolio(e)}},{label:"No"}]})},a.showStock=function(e,t){e.preventDefault(),a.props.history.push("/portfolio/"+a.id+"/stock/"+t)},a.getValues=function(e,t){a.url="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+e+"&interval=5min&apikey="+a.apiKey,a.getData().then(function(e){(a.currentValue=e[0],1===a.counter)&&(console.log(e),a.state.portfolio.stocks[t].currentValue=a.currentValue,a.setState({portfolio:a.state.portfolio}),a.counter++)})},a.getData=Object(k.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.url);case 2:return t=e.sent,e.next=5,t.json().then(function(e){a.values=e["Time Series (Daily)"],Object.keys(a.values).map(function(e){var t=parseFloat(a.values[e]["4. close"]);a.valuesArray.push(t)})}).catch(function(e){console.warn(e)});case 5:return e.abrupt("return",a.valuesArray);case 6:case"end":return e.stop()}},e,this)})),a.backToHome=function(){a.props.history.push("/")},a.state={name:"",numOfShares:0,portfolio:{name:"",totalValue:0,stocks:[{name:"",numOfShares:0,currentValue:0}]}},a.url="",a.values=[],a.valuesArray=[],a.currentValue=0,a.currentValues=[],a.portfolioValue=0,a.id=e.match.params.id,a.counter=0,a.symbolChange=a.symbolChange.bind(Object(E.a)(Object(E.a)(a))),a.numOfSharesChange=a.numOfSharesChange.bind(Object(E.a)(Object(E.a)(a))),"undefined"!==typeof Storage&&0!==localStorage.length&&(a.state.portfolio=JSON.parse(localStorage.getItem("portfolios"))[a.id]),console.log(a.state.portfolio),a.apiKey="AH3A612TPNUUG8DZ",a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"symbolChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"numOfSharesChange",value:function(e){e.preventDefault(),this.setState({numOfShares:e.target.value})}},{key:"getPortfolioValue",value:function(){if(0===this.counter){for(var e=this.state.portfolio.stocks,t=0;t<e.length;t++){console.log(e[t]);var a=e[t].currentValue,o=parseFloat(e[t].numOfShares);console.log(a,o),this.portfolioValue+=a*o}this.counter++,console.log(this.portfolioValue);var n=this.state.portfolio;n.totalValue=this.portfolioValue,this.setState({portfolio:n})}}},{key:"componentDidMount",value:function(){this.setState({values:this.values,currentValue:this.currentValue})}},{key:"render",value:function(){var e=this,t=this.state.portfolio;return console.log(t),n.a.createElement("div",null,n.a.createElement("span",{onClick:function(){return e.backToHome()},className:"backBtn"},n.a.createElement("i",{className:"fas fa-arrow-left mb-3"})," back"),t&&n.a.createElement("div",null,n.a.createElement("h4",{className:"mb-3"},"Portfolio: ",t.name),t&&t.stocks.length>0&&n.a.createElement("div",null,n.a.createElement("h5",null,"Stocks",t.stocks.length<=50&&n.a.createElement("i",{className:"fas fa-plus float-right btn btn-success",onClick:function(t){return e.showAddStocksDialog(t)}})),n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Quantity"),n.a.createElement("th",null,"Unit value"),n.a.createElement("th",null,"Total value"),n.a.createElement("th",null))),n.a.createElement("tbody",null,t.stocks.map(function(t,a){return n.a.createElement("tr",{key:a},e.getValues(t.name,a),n.a.createElement("th",{onClick:function(t){return e.showStock(t,a)}},t.name),n.a.createElement("th",{onClick:function(t){return e.showStock(t,a)}},t.numOfShares),n.a.createElement("th",{onClick:function(t){return e.showStock(t,a)}},t.currentValue," \u20ac"),n.a.createElement("th",{onClick:function(t){return e.showStock(t,a)}},t.currentValue*t.numOfShares," \u20ac"),n.a.createElement("th",null,n.a.createElement("i",{onClick:function(t){return e.confirmRemoveStock(t,a)},className:"fas fa-trash"})))}),n.a.createElement("tr",null,n.a.createElement("th",null,"Portfolio value"),n.a.createElement("th",null),n.a.createElement("th",null),n.a.createElement("th",null,this.getPortfolioValue()," \u20ac"),n.a.createElement("th",null))))),0===t.stocks.length&&n.a.createElement("div",null,n.a.createElement("h4",null,"You don't have any stocks in this portfolio"),n.a.createElement("button",{type:"button",className:"btn btn-success mb-3",onClick:function(t){return e.showAddStocksDialog(t)}},"Add stocks")),n.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.confirmRemovePortfolio(t)}},"Remove portfolio")),!t&&n.a.createElement("h4",null,"This portfolio does not exist"))}}]),t}(o.Component)),O=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},n.a.createElement(h.a,{className:"navbar-brand",to:"/"},"SPMS"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.a,{activeClassName:"active",className:"nav-link",to:"/new"},"New portfolio"))))))}}]),t}(o.Component),N=a(59),C=function(e){var t={labels:e.time,datasets:[{label:e.symbol,fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:e.values}]};return n.a.createElement(N.a,{height:280,data:t})},j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getData=Object(k.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.url);case 2:return t=e.sent,e.next=5,t.json().then(function(e){console.log(e),a.values=e["Time Series (Daily)"],a.setState({values:a.values})}).catch(function(e){console.warn(e)});case 5:case"end":return e.stop()}},e,this)})),a.backToPortfolio=function(){a.props.history.push("/portfolio/"+a.portfolio_id)},a.apiKey="AH3A612TPNUUG8DZ",a.portfolio_id=e.match.params.id,a.stock_id=e.match.params.stock_id,a.state={},a.values=[],"undefined"!==typeof Storage&&0!==localStorage.length&&(a.state.portfolio=JSON.parse(localStorage.getItem("portfolios"))[a.portfolio_id]),console.log(a.state.portfolio),a.stock=a.state.portfolio.stocks[a.stock_id],a.stock&&(a.url="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+a.stock.name+"&interval=5min&apikey="+a.apiKey,a.getData()),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({values:this.values})}},{key:"render",value:function(){var e=this,t=this.state.values,a=this.stock,o=[],l=[];t?Object.keys(t).map(function(e){var a=parseFloat(t[e]["4. close"]),n=e;o.unshift(a),l.unshift(n)}):alert("Stock data is currently unavailable, please try again later");var r=o[o.length-1];return n.a.createElement("div",null,a&&n.a.createElement("div",null,n.a.createElement("span",{onClick:function(){return e.backToPortfolio()},className:"backBtn"},n.a.createElement("i",{className:"fas fa-arrow-left mb-3"})," back"),n.a.createElement("h4",null,"Stock: ",this.stock.name),n.a.createElement("h6",null,"Current value: ",r," \u20ac"),n.a.createElement(C,{symbol:a.name,values:o,time:l})),!a&&n.a.createElement("h4",null,"This stock does not exist"))}}]),t}(o.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(f.a,null,n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement("div",{className:"content"},n.a.createElement(p.a,{exact:!0,path:"/",component:b}),n.a.createElement(p.a,{path:"/new",component:v}),n.a.createElement(p.a,{exact:!0,path:"/portfolio/:id",component:y}),n.a.createElement(p.a,{path:"/portfolio/:id/stock/:stock_id",component:j}))))}}]),t}(o.Component);r.a.render(n.a.createElement(w,null),document.getElementById("root"))},61:function(e,t,a){e.exports=a(214)},66:function(e,t,a){}},[[61,2,1]]]);
//# sourceMappingURL=main.e2829284.chunk.js.map